<?xml version="1.0" encoding="utf-8"?>
<s:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   xmlns:mx="library://ns.adobe.com/flex/mx"
			   title="Delete Project"
			   move="Helpers.doMove(this)"
			   creationComplete="creationCompleteHandler(event)"
			   close="PopUpManager.removePopUp(this)"
			   width="356" height="334">
	
	<fx:Script>
		<![CDATA[
			import com.momentumsi.c9.utils.Helpers;
			import com.momentumsi.c9.models.Project;
			import com.momentumsi.c9.models.User;
			
			import mx.controls.Alert;
			import mx.events.CloseEvent;
			import mx.events.FlexEvent;
			import mx.managers.PopUpManager;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			
			private var bodyStack:BodyStack;
			
			[Bindable]
			public var user:User;
			
			protected function deleteButton_clickHandler(event:MouseEvent):void
			{
				deleteButton.enabled = false;
				deleteButton.label = "Deleting";
				bodyStack.deleteProjectCheck(Project(projectsList.selectedItem));
				PopUpManager.removePopUp(this);
			}
			
			protected function cancelButton_clickHandler(event:MouseEvent):void
			{
				PopUpManager.removePopUp(this);
			}
			
			protected function creationCompleteHandler(event:FlexEvent):void
			{
				PopUpManager.centerPopUp(this);
				bodyStack = this.parentApplication.bodyStack;
			}
			
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->		
	</fx:Declarations>
	<s:VGroup height="100%" width="100%">
		<s:HGroup width="100%" paddingLeft="10" paddingRight="10" paddingTop="5">
			<mx:Text width="100%" paddingBottom="5"
					 text="Deleting a project terminates all provisioned items created in this project.  Please select the project to delete below."/>
		</s:HGroup>
		<s:HGroup width="100%">
			<s:VGroup width="100%" height="100%" paddingLeft="10" paddingRight="10" paddingBottom="20">
				<mx:Text text="Projects" fontWeight="bold" color="black"/>
				<s:BorderContainer cornerRadius="4" height="100%" width="100%">
					<s:Rect width="100%" height="100%">
						<s:fill>
							<s:SolidColor>
								<s:color>0x330066</s:color>
							</s:SolidColor>
						</s:fill>
					</s:Rect>
					<s:List styleName="transparentList" id="projectsList" dataProvider="{user.project_memberships}" height="134" width="100%" color="white" labelField="project-name"/>
				</s:BorderContainer>
			</s:VGroup>
		</s:HGroup>
		<s:HGroup width="100%" horizontalAlign="center" gap="15">
			<s:Button id="deleteButton" label="Delete" click="deleteButton_clickHandler(event)" enabled="{projectsList.selectedIndex!=-1}"/>
			<s:Button label="Cancel" click="cancelButton_clickHandler(event)"/>
		</s:HGroup>
	</s:VGroup>
</s:TitleWindow>
