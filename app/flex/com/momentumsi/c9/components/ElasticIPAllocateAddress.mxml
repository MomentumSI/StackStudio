<?xml version="1.0" encoding="utf-8"?>
<wizard:WizardWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
					 xmlns:s="library://ns.adobe.com/flex/spark" 
					 xmlns:mx="library://ns.adobe.com/flex/mx"
					 xmlns:wizard="com.momentumsi.c9.components.wizard.*"
					 title="Allocate New Address"
					 width="300" height="200" 
					 xmlns:services="com.momentumsi.c9.services.*">
	<fx:Script>
		<![CDATA[
			import com.momentumsi.c9.utils.Helpers;
			
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.managers.PopUpManager;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			
			[Bindable]
			private var eipTypeList:ArrayCollection = new ArrayCollection([{label: "EC2"}]);
			
			protected function submitButton_clickHandler(event:MouseEvent):void
			{
				submitButton.enabled = false;
				ec2Service.allocateAddress();
			}
			
			protected function ec2Service_resultHandler(event:ResultEvent):void
			{
				Helpers.getObjectManagement(this).refreshResourceList();
				PopUpManager.removePopUp(this);
			}
			
			protected function ec2Service_faultHandler(event:FaultEvent):void
			{
				submitButton.enabled = true;
			}
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<services:Ec2Service id="ec2Service"
							 cloudAccountId="{cloudAccount.id}"
							 region="{region}"
							 result="ec2Service_resultHandler(event)"
							 fault="ec2Service_faultHandler(event)"/>
	</fx:Declarations>
	
	<s:VGroup width="100%" height="75%" paddingTop="10" paddingLeft="20" paddingRight="20">
		<mx:Text text="Are you sure you want to allocate a new IP address?" width="100%"/>
		<s:HGroup>
			<mx:Text text="EIP used in:"/>
			<mx:ComboBox id="eipType" width="100" dataProvider="{eipTypeList}"/>
		</s:HGroup>
	</s:VGroup>
	<s:Button id="submitButton" x="76" y="136" label="Allocate"
			  click="submitButton_clickHandler(event)"/>
	<s:Button id="cancelButton" x="153" y="136" label="Cancel" click="PopUpManager.removePopUp(this)"/>
</wizard:WizardWindow>
