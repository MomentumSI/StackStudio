<?xml version="1.0" encoding="utf-8"?>
<s:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx"
		 title="Text Edit"
		 creationComplete="creationCompleteHandler(event)"
		 move="Helpers.doMove(this)"
		 close="PopUpManager.removePopUp(this)"
		 width="500" height="130"
		 xmlns:diagrammer="fr.kapit.diagrammer.base.uicomponent.*"
		 defaultButton="{submitButton}">
	<fx:Script>
		<![CDATA[
			import com.momentumsi.c9.utils.Helpers;
			
			import fr.kapit.diagrammer.Diagrammer;
			
			import mx.controls.Alert;
			import mx.events.FlexEvent;
			import mx.managers.PopUpManager;
			
			[Bindable]
			public var configure:int = 0;
			
			protected function creationCompleteHandler(event:FlexEvent):void
			{
				PopUpManager.centerPopUp(this);
				text.setFocus();
				if(configure == 1)
				{
					text.text = textInstance.child('label');
				}
			}
			
			protected function save_clickHandler(event:MouseEvent):void
			{
				if(text.text != "")
				{
					node.data = XML("<text><label>"+text.text+"</label></text>");
					PopUpManager.removePopUp(this);
				}else
					Alert.show("The text field is required.");
			}
			
			protected function remove_clickHandler(event:MouseEvent):void
			{
				var designDiagram:Diagrammer = Helpers.getDesignDiagram(this);
				designDiagram.removeNodeElement(node.itemID);
				PopUpManager.removePopUp(this);
			}
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<fx:XML id="textInstance"/>
		<diagrammer:DiagramSprite id="node"/>
	</fx:Declarations>
	<s:Form>
		<s:FormItem width="428" label="Text:*">
			<s:TextInput id="text" width="400"/>
		</s:FormItem>
	</s:Form>
	<s:Button x="135" y="68" id="submitButton" label="Save" click="save_clickHandler(event)"/>
	<s:Button x="294" y="68" label="Cancel" click="PopUpManager.removePopUp(this)"/>
	<s:Button x="213" y="68" label="Remove" click="remove_clickHandler(event)"/>
</s:TitleWindow>
